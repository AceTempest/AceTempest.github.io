<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCI Artifacts</title>
    <link rel="icon" type="image/png" href="https://runescape.wiki/images/Archaeology-icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #FDF6E3; /* A warm, parchment-like background */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .selected-row {
            background-color: #FEF3C7; /* A light amber for selected rows */
        }
        /* Simple loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #b45309;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* CSS for the sticky header */
        #player-selection-section {
            position: -webkit-sticky; /* For Safari compatibility */
            position: sticky;
            top: 0; /* Sticks to the top of the viewport */
            z-index: 10; /* Ensures it stays on top of other content */
        }
    </style>
</head>
<body class="font-sans text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-amber-900">TCI Artifacts</h1>
            <p class="text-lg text-amber-700 mt-2">Request artefacts easily utilizing this tool.</p>
        </header>

        <main>
             <!-- Admin/Sync Section -->
            <!--<section id="admin-section" class="mb-8 p-6 bg-amber-100 border border-amber-300 rounded-lg shadow-md text-center">
                <h2 class="text-xl font-bold text-amber-900 mb-2">Master List Management</h2>
                <p class="text-amber-800 mb-4">The master artefact list is now managed directly in the HTML file. After updating the file, click the button below to sync the changes to the shared database for all users.</p>
                <button id="sync-button" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-2 px-4 rounded shadow-lg transition duration-300">
                    Sync Master List
                </button>
                <p id="sync-status" class="mt-2 text-sm text-gray-600"></p>
            </section>

            <!-- Player Selection Section - This will now stick to the top when scrolling -->
            <section id="player-selection-section" class="mb-8 p-6 bg-amber-50 rounded-lg shadow-md text-center">
                <h2 class="text-xl font-bold text-amber-900 mb-2">Select Your Name to Edit</h2>
                <p id="request-prompt" class="text-amber-700 mb-4">Click your name below to start adding or removing requests in the table.</p>
                <div id="player-controls" class="flex justify-center items-center gap-4 flex-wrap">
                    <!-- Player selection buttons will be dynamically inserted here -->
                </div>
            </section>

            <!-- Filtering and Search Section -->
            <section id="filters" class="mb-8 p-6 bg-amber-50 rounded-lg shadow-md">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="collection-filter" class="block text-sm font-medium text-amber-800 mb-1">Filter by Collection / Use</label>
                        <select id="collection-filter" class="w-full p-2 border border-amber-300 rounded-md bg-white focus:ring-amber-500 focus:border-amber-500">
                            <option value="all">All Collections</option>
                        </select>
                    </div>
                    <div>
                        <label for="artefact-search" class="block text-sm font-medium text-amber-800 mb-1">Search by Name or Collection</label>
                        <input type="text" id="artefact-search" placeholder="Search by name or collection..." class="w-full p-2 border border-amber-300 rounded-md bg-white focus:ring-amber-500 focus:border-amber-500">
                    </div>
                </div>
            </section>

            <!-- Artefacts Table Section -->
            <section id="artefact-table-section" class="bg-white p-6 rounded-lg shadow-lg">
                 <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-amber-800 uppercase bg-amber-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">Artefact Name</th>
                                <th scope="col" class="px-6 py-3">Collection(s) / Uses</th>
                                <th scope="col" class="px-6 py-3 text-center">Total Requests</th>
                                <th scope="col" class="px-6 py-3">All Requesters</th>
                                <th scope="col" class="px-6 py-3 text-center">Your Requests</th>
                            </tr>
                        </thead>
                        <tbody id="artefact-table-body">
                           <tr><td colspan="5"><div class="loader"></div><p class="text-center">Loading Artefacts from Database...</p></td></tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Material Calculator Section -->
            <section id="material-calculator" class="mt-8">
                <div class="bg-white p-6 rounded-lg shadow-lg w-full">
                    <h2 class="text-2xl font-bold text-amber-900 mb-4 text-center">Total Materials Required</h2>
                    <div id="material-list">
                        <!-- Total material list will be generated here -->
                        <p class="text-center text-gray-500">Request artefacts to see required materials.</p>
                    </div>
                </div>
            </section>
            
            <!-- Per-Person Material Section -->
            <section id="per-person-materials" class="mt-8">
                 <div class="bg-white p-6 rounded-lg shadow-lg w-full">
                    <h2 class="text-2xl font-bold text-amber-900 mb-4 text-center">Per-Person Material Breakdown</h2>
                    <div id="per-person-material-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Per-person lists will be generated here -->
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 text-sm text-amber-600">
            <p>Created for the RuneScape community. All data is based on community-driven sources.</p>
        </footer>
    </div>
    
    <!-- This script tag contains the master list of artefacts. -->
    <!-- EDIT THIS LIST to add, remove, or change artefacts. -->
    <!-- After editing, upload the file and click the "Sync Master List" button on the webpage. -->
    <script id="artefact-master-list">
        const masterArtefactList = [
            { name: "Centurion's dress sword", collections: ["Museum - Training Weapons (tutorial-only)"] },
            { name: "Venator dagger", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Venator light crossbow", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Centurion's seal", collections: ["Mystery: Breaking the Seal"] },
            { name: "Primis Elementis standard", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Legionary gladius", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Legionary square shield", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Zaros effigy", collections: ["Zarosian I", "Museum - Zarosian I"] },
            { name: "Zarosian training dummy", collections: ["Zarosian I", "Museum - Zarosian I", "Unlock Researcher: Katarina"] },
            { name: "Hookah pipe", collections: ["Smoky Fings", "Zamorakian I", "Museum - Zamorakian I"] },
            { name: "Opulent wine goblet", collections: ["Smoky Fings", "Zamorakian I", "Museum - Zamorakian I", "Unlock Researcher: Dorian"] },
            { name: "Crest of Dagon", collections: ["Showy Fings", "Zamorakian I", "Museum - Zamorakian I", "Mystery: Eyes in their Stars"] },
            { name: "'Disorder' painting", collections: ["Knowledge is Power", "Anarchic Abstraction", "Zamorakian I", "Museum - Zamorakian I"] },
            { name: "Legatus Maximus figurine", collections: ["Showy Fings", "Zarosian I", "Museum - Zarosian I", "Magic Man"] },
            { name: "'Solem in Umbra' painting", collections: ["Imperial Impressionism", "Zarosian I", "Museum - Zarosian I"] },
            { name: "Imp mask", collections: ["Zamorakian I", "Museum - Zamorakian I", "Hat Problem"] },
            { name: "Lesser demon mask", collections: ["Zamorakian I", "Museum - Zamorakian I", "Hat Hoarder"] },
            { name: "Greater demon mask", collections: ["Zamorakian I", "Museum - Zamorakian I", "Hat Hoarder"] },
            { name: "Teleportation crystal", collections: ["Quest: Osseous Rex"] },
            { name: "Order of Dis robes", collections: ["Zamorakian I", "Museum - Zamorakian I"] },
            { name: "Ritual dagger", collections: ["Zamorakian I", "Museum - Zamorakian I", "Magic Man"] },
            { name: "'Frying pan'", collections: ["Saradominist I", "Museum - Saradominist I", "Mystery: Fallen Angels"] },
            { name: "Hallowed lantern", collections: ["Saradominist I", "Museum - Saradominist I"] },
            { name: "Branding iron", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Manacles", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Ancient timepiece", collections: ["Blingy Fings", "Zarosian II", "Museum - Zarosian II", "Mystery: Time Served"] },
            { name: "Legatus pendant", collections: ["Blingy Fings", "Zarosian II", "Museum - Zarosian II", "Toolbelt: Kharid-et access"] },
            { name: "Ceremonial unicorn ornament", collections: ["Saradominist I", "Museum - Saradominist I", "Hat Hoarder", "Unlock Researcher: Eduardo"] },
            { name: "Ceremonial unicorn saddle", collections: ["Saradominist I", "Museum - Saradominist I"] },
            { name: "Dragonkin device", collections: ["Quest: Desperate Measures"] },
            { name: "Dragonkin tablet", collections: ["Quest: Desperate Measures"] },
            { name: "Tetracompass (unpowered)", collections: ["Utility: Find ancient casket"] },
            { name: "Everlight harp", collections: ["Saradominist I", "Museum - Saradominist I", "Wise Am the Music Man"] },
            { name: "Everlight trumpet", collections: ["Saradominist I", "Museum - Saradominist I", "Wise Am the Music Man"] },
            { name: "Everlight violin", collections: ["Saradominist I", "Museum - Saradominist I", "Wise Am the Music Man"] },
            { name: "Folded-arm figurine (female)", collections: ["Saradominist I", "Museum - Saradominist I"] },
            { name: "Folded-arm figurine (male)", collections: ["Saradominist I", "Museum - Saradominist I"] },
            { name: "'Incite Fear' spell scroll", collections: ["Zarosian II", "Museum - Zarosian II", "Magic Man", "Imperial Sorcery", "Mystery: The Vault of Shadows"] },
            { name: "Pontifex signet ring", collections: ["Blingy Fings", "Zarosian II", "Museum - Zarosian II", "Toolbelt: Kharid-et access"] },
            { name: "Apex cap", collections: ["Museum - Zarosian V", "Religious Iconography"] },
            { name: "Curse tablet", collections: ["Museum - Zarosian V", "Imperial Sorcery"] },
            { name: "Funerary urn of shadow", collections: ["Museum - Zarosian V", "Urns of the Empire", "Mystery: Secrets of the Inquisition"] },
            { name: "Dominion discus", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Dominion javelin", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Dominion pelte shield", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Infula robes", collections: ["Museum - Zarosian V", "Religious Iconography"] },
            { name: "Funerary urn of smoke", collections: ["Museum - Zarosian V", "Urns of the Empire", "Mystery: Secrets of the Inquisition"] },
            { name: "Hand of the Ancients", collections: ["Museum - Zarosian V", "Imperial Sorcery"] },
            { name: "Decorative amphora", collections: ["Museum - Zarosian VI", "Entertaining the Masses"] },
            { name: "Funerary urn of ice", collections: ["Museum - Zarosian VI", "Urns of the Empire", "Mystery: Secrets of the Inquisition"] },
            { name: "Loarnab rod", collections: ["Museum - Zarosian VI", "Religious Iconography"] },
            { name: "Inquisitor's ceremonial armour", collections: ["Finery of the Inquisition", "Museum - Zarosian VI"] },
            { name: "Inquisitor's ceremonial mask", collections: ["Finery of the Inquisition", "Museum - Zarosian VI"] },
            { name: "Inquisitor's seal", collections: ["Finery of the Inquisition", "Museum - Zarosian VI"] },
            { name: "'The Lake of Fire' painting", collections: ["Anarchic Abstraction", "Zamorakian II", "Museum - Zamorakian II"] },
            { name: "'Lust' metal sculpture", collections: ["Showy Fings", "Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Gladiator helmet", collections: ["Entertaining the Masses", "Museum - Zarosian VII"] },
            { name: "Gladiator sword", collections: ["Entertaining the Masses", "Museum - Zarosian VII"] },
            { name: "Funerary urn of blood", collections: ["Museum - Zarosian VII", "Urns of the Empire", "Mystery: Secrets of the Inquisition"] },
            { name: "Funerary urn of miasma", collections: ["Museum - Zarosian VII", "Urns of the Empire"] },
            { name: "Model chariot", collections: ["Museum - Zarosian VII", "Entertaining the Masses"] },
            { name: "'The Serpent's Fall' carving", collections: ["Museum - Zarosian VII", "Religious Iconography"] },
            { name: "Chaos star", collections: ["Zamorakian II", "Museum - Zamorakian II", "Toolbelt: Hydra portal"] },
            { name: "Spiked dog collar", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Bronze Dominion medal", collections: ["Blingy Fings", "Saradominist II", "Museum - Saradominist II"] },
            { name: "Silver Dominion medal", collections: ["Blingy Fings", "Saradominist II", "Museum - Saradominist II"] },
            { name: "Dominion torch", collections: ["Smoky Fings", "Saradominist II", "Museum - Saradominist II", "Mystery: Hallowed Be..."] },
            { name: "Ikovian gerege", collections: ["Armadylean I", "Museum - Armadylean I", "Knowledge is Power", "Toolbelt: Stormguard access"] },
            { name: "Toy glider", collections: ["Armadylean I", "Museum - Armadylean I"] },
            { name: "Toy war golem", collections: ["Armadylean I", "Museum - Armadylean I"] },
            { name: "Ceremonial dragonkin device", collections: ["Desperate for Artefacts"] },
            { name: "Decorative vase", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Kantharos cup", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Patera bowl", collections: ["Saradominist II", "Museum - Saradominist II"] },
            { name: "Castle gatestone", collections: ["Dragonkin V", "Museum - Dragonkin V"] },
            { name: "Engraved ring of kinship", collections: ["Dragonkin V", "Museum - Dragonkin V"] },
            { name: "Ceremonial mace", collections: ["Hitty Fings", "Zarosian II", "Museum - Zarosian II"] },
            { name: "Pontifex Maximus figurine", collections: ["Showy Fings", "Zarosian II", "Museum - Zarosian II"] },
            { name: "'Consensus ad Idem' painting", collections: ["Imperial Impressionism", "Zarosian II", "Museum - Zarosian II"] },
            { name: "Wingsuit v1", collections: ["Toolbelt: Stormguard traversal"] },
            { name: "Avian song-egg player", collections: ["Armadylean I", "Museum - Armadylean I", "Wise Am the Music Man"] },
            { name: "Keshik drum", collections: ["Armadylean I", "Museum - Armadylean I", "Wise Am the Music Man"] },
            { name: "Morin khuur", collections: ["Armadylean I", "Museum - Armadylean I", "Wise Am the Music Man"] },
            { name: "Ekeleshuun blinder mask", collections: ["Green Gobbo Goodies I", "Museum - Bandosian I", "Hat Problem"] },
            { name: "Narogoshuun 'Hob-da-Gob' ball", collections: ["Green Gobbo Goodies I", "Museum - Bandosian I"] },
            { name: "Rekeshuun war tether", collections: ["Green Gobbo Goodies I", "Museum - Bandosian I"] },
            { name: "Exploratory totem", collections: ["Dragonkin V", "Museum - Dragonkin V"] },
            { name: "Excavator portal mine", collections: ["Dragonkin V", "Museum - Dragonkin V"] },
            { name: "Storage totem", collections: ["Dragonkin VI", "Museum - Dragonkin VI"] },
            { name: "Plant seed satchel", collections: ["Dragonkin VI", "Museum - Dragonkin VI"] },
            { name: "Snuff box", collections: ["Dragonkin VI", "Museum - Dragonkin VI"] },
            { name: "Aviansie dreamcoat", collections: ["Armadylean I", "Museum - Armadylean I"] },
            { name: "Ceremonial plume", collections: ["Showy Fings", "Armadylean I", "Museum - Armadylean I"] },
            { name: "Peacocking parasol", collections: ["Armadylean I", "Museum - Armadylean I"] },
            { name: "Ogre Kyzaj axe", collections: ["Red Rum Relics I", "Museum - Bandosian I"] },
            { name: "Ork cleaver sword", collections: ["Red Rum Relics I", "Museum - Bandosian I"] },
            { name: "Larupia trophy", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Lion trophy", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "She-wolf trophy", collections: ["Zamorakian II", "Museum - Zamorakian II"] },
            { name: "Pontifex censer", collections: ["Smoky Fings", "Zarosian II", "Museum - Zarosian II"] },
            { name: "Pontifex crozier", collections: ["Hitty Fings", "Zarosian II", "Museum - Zarosian II"] },
            { name: "Pontifex mitre", collections: ["Zarosian II", "Museum - Zarosian II", "Hat Hoarder"] },
            { name: "Thorobshuun battle standard", collections: ["Green Gobbo Goodies I", "Museum - Bandosian I"] },
            { name: "Yurkolgokh stink grenade", collections: ["Green Gobbo Goodies I", "Museum - Bandosian I"] },
            { name: "Dominarian device", collections: ["Saradominist III", "Museum - Saradominist III", "Relic: Andvaranaut"] },
            { name: "Fishing trident", collections: ["Hitty Fings", "Saradominist III", "Museum - Saradominist III"] },
            { name: "Hawkeye lens multi-vision scope", collections: ["Armadylean II", "Museum - Armadylean II"] },
            { name: "Talon-3 razor wing", collections: ["Armadylean II", "Museum - Armadylean II"] },
            { name: "'Exsanguinate' spell scroll", collections: ["Zarosian III", "Museum - Zarosian III", "Magic Man", "Imperial Sorcery", "Mystery: The Vault of Shadows"] },
            { name: "Necromantic focus", collections: ["Zarosian III", "Museum - Zarosian III", "Knowledge is Power", "Imperial Sorcery"] },
            { name: "Spent summoning charm", collections: ["Dragonkin VI", "Museum - Dragonkin VI", "Toolbelt: Daemonheim access"] },
            { name: "'Friendship bracelet'", collections: ["Dragonkin VI", "Museum - Dragonkin VI"] },
            { name: "Homely totem", collections: ["Dragonkin VI", "Museum - Dragonkin VI"] },
            { name: "High priest crozier", collections: ["Hitty Fings", "Green Gobbo Goodies II", "Museum - Bandosian I"] },
            { name: "High priest mitre", collections: ["Green Gobbo Goodies II", "Museum - Bandosian I", "Hat Problem", "Magic Man"] },
            { name: "High priest orb", collections: ["Hitty Fings", "Green Gobbo Goodies II", "Museum - Bandosian I"] },
            { name: "'Torment' metal sculpture", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "'Pandemonium' tapestry", collections: ["Anarchic Abstraction", "Zamorakian III", "Museum - Zamorakian III"] },
            { name: "Ceremonial dragonkin tablet", collections: ["Desperate for Artefacts"] },
            { name: "Pasaha", collections: ["Dragonkin I", "Museum - Dragonkin I", "Crafting: Artificer's measure"] },
            { name: "Ritual bell", collections: ["Dragonkin I", "Museum - Dragonkin I"] },
            { name: "Prototype gravimeter", collections: ["Armadylean II", "Museum - Armadylean II"] },
            { name: "Songbird recorder", collections: ["Armadylean II", "Museum - Armadylean II", "Wise Am the Music Man"] },
            { name: "Amphora", collections: ["Saradominist III", "Museum - Saradominist III"] },
            { name: "Rod of Asclepius", collections: ["Showy Fings", "Saradominist III", "Museum - Saradominist III"] },
            { name: "Zarosian ewer", collections: ["Zarosian III", "Museum - Zarosian III"] },
            { name: "Zarosian stein", collections: ["Zarosian III", "Museum - Zarosian III"] },
            { name: "Beastkeeper helm", collections: ["Red Rum Relics I", "Museum - Bandosian II", "Hat Problem"] },
            { name: "Idithuun horn ring", collections: ["Green Gobbo Goodies II", "Museum - Bandosian II"] },
            { name: "'Nosorog!' sculpture", collections: ["Red Rum Relics I", "Museum - Bandosian II"] },
            { name: "Dayguard shield", collections: ["Armadylean II", "Museum - Armadylean II"] },
            { name: "Stormguard gerege", collections: ["Armadylean II", "Museum - Armadylean II", "Toolbelt: Howl's Workshop access"] },
            { name: "Kilaya", collections: ["Dragonkin I", "Museum - Dragonkin I"] },
            { name: "Vazara", collections: ["Dragonkin I", "Museum - Dragonkin I"] },
            { name: "Ourg megahitter", collections: ["Red Rum Relics II", "Museum - Bandosian II", "Unlock Researcher: Asgarnia Smith"] },
            { name: "Ourg tower/goblin cower shield", collections: ["Red Rum Relics II", "Museum - Bandosian II"] },
            { name: "Garagorshuun anchor", collections: ["Green Gobbo Goodies II", "Museum - Bandosian II"] },
            { name: "Golem heart", collections: ["Armadylean II", "Museum - Armadylean II"] },
            { name: "Golem instruction", collections: ["Armadylean II", "Museum - Armadylean II", "Knowledge is Power", "Unlock Researcher: Elissa Giovanni"] },
            { name: "Hellfire haladie", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "Hellfire katar", collections: ["Zamorakian III", "Museum - Zamorakian III", "Relic: The Rings of Razulei"] },
            { name: "Hellfire zaghnal", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "Death mask", collections: ["Dragonkin I", "Museum - Dragonkin I", "Relic: Evil Bob's Catspaw"] },
            { name: "Dragonkin calendar", collections: ["Dragonkin I", "Museum - Dragonkin I"] },
            { name: "Dragonkin staff", collections: ["Dragonkin I", "Museum - Dragonkin I"] },
            { name: "Dorgeshuun spear", collections: ["Green Gobbo Goodies III", "Museum - Bandosian II", "Mystery: You Have Chosen..."] },
            { name: "'Forged in War' sculpture", collections: ["Red Rum Relics II", "Museum - Bandosian II", "Mystery: You Have Chosen..."] },
            { name: "Kopis dagger", collections: ["Saradominist III", "Museum - Saradominist III"] },
            { name: "Xiphos short sword", collections: ["Saradominist III", "Museum - Saradominist III"] },
            { name: "'Smoke Cloud' spell scroll", collections: ["Magic Man", "Zarosian III", "Museum - Zarosian III", "Imperial Sorcery", "Mystery: The Vault of Shadows"] },
            { name: "Vigorem vial", collections: ["Zarosian III", "Museum - Zarosian III", "Crafting: Artificer's measure"] },
            { name: "Dragon scalpel", collections: ["Dragonkin II", "Museum - Dragonkin II"] },
            { name: "Protective goggles", collections: ["Dragonkin II", "Museum - Dragonkin II", "Crafting: Artificer's measure"] },
            { name: "Dragon burner", collections: ["Dragonkin II", "Museum - Dragonkin II", "Crafting: Orthen furnace core"] },
            { name: "Orthenglass flask", collections: ["Dragonkin II", "Museum - Dragonkin II", "Relic: Soma"] },
            { name: "Blackfire lance", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Nightguard shield", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Projection attuner", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Golden projection 'needle'", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Huzamogaarb chaos crown", collections: ["Green Gobbo Goodies III", "Museum - Bandosian III", "Hat Problem"] },
            { name: "Saragorgak star crown", collections: ["Green Gobbo Goodies III", "Museum - Bandosian III", "Hat Hoarder"] },
            { name: "'Possession' metal sculpture", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "Trishula", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "Tsutsaroth piercing", collections: ["Zamorakian III", "Museum - Zamorakian III"] },
            { name: "'Hallowed Be the Everlight' painting", collections: ["Museum - Saradominist IV", "Radiant Renaissance", "Saradominist IV"] },
            { name: "'The Lord of Light' painting", collections: ["Museum - Saradominist IV", "Radiant Renaissance", "Saradominist IV"] },
            { name: "'The Pride of Padosan' painting", collections: ["Museum - Saradominist IV", "Radiant Renaissance", "Saradominist IV"] },
            { name: "Meditation pipe", collections: ["Dragonkin III", "Museum - Dragonkin III"] },
            { name: "Personal totem", collections: ["Dragonkin III", "Museum - Dragonkin III"] },
            { name: "Singing bowl", collections: ["Dragonkin III", "Museum - Dragonkin III", "Mystery: Fragmented Memories"] },
            { name: "Ancient magic tablet", collections: ["Zarosian III", "Museum - Zarosian III", "Imperial Sorcery"] },
            { name: "'Animate Dead' spell scroll", collections: ["Magic Man", "Zarosian III", "Museum - Zarosian III", "Imperial Sorcery", "Mystery: The Vault of Shadows"] },
            { name: "Portable phylactery", collections: ["Magic Man", "Zarosian III", "Museum - Zarosian III", "Mystery: The Forgotten Prisoner"] },
            { name: "Comfort gatestone", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Halak's cube", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Lingam stone", collections: ["Dragonkin III", "Museum - Dragonkin III", "Toolbelt: Xolo City access"] },
            { name: "Master control", collections: ["Dragonkin III", "Museum - Dragonkin III", "Mystery: Fragmented Memories"] },
            { name: "'The Enlightened Soul' scroll", collections: ["Knowledge is Power", "Museum - Saradominist IV", "Saradominist IV"] },
            { name: "'The Eudoxian Elements' tablet", collections: ["Knowledge is Power", "Museum - Saradominist IV", "Saradominist IV"] },
            { name: "Drogokishuun hook sword", collections: ["Green Gobbo Goodies III", "Museum - Bandosian III"] },
            { name: "Hobgoblin mansticker", collections: ["Red Rum Relics II", "Museum - Bandosian III"] },
            { name: "Chaos Elemental trophy", collections: ["Museum - Zamorakian IV", "Zamorakian IV"] },
            { name: "Virius trophy", collections: ["Museum - Zamorakian IV", "Zamorakian IV"] },
            { name: "Flat cap", collections: ["Armadylean III", "Museum - Armadylean III", "Hat Problem"] },
            { name: "Night owl flight goggles", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Prototype godbow", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Prototype godstaff", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Prototype godsword", collections: ["Armadylean III", "Museum - Armadylean III", "Relic: The Subtle Blade"] },
            { name: "Xolo hard hat", collections: ["Dragonkin IV", "Museum - Dragonkin IV"] },
            { name: "Xolo pickaxe", collections: ["Dragonkin IV", "Museum - Dragonkin IV"] },
            { name: "Portable portal generator", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Warped trinket", collections: ["Dragonkin VII", "Museum - Dragonkin VII"] },
            { name: "Praetorian hood", collections: ["Zarosian IV", "Museum - Zarosian IV", "Hat Problem"] },
            { name: "Praetorian robes", collections: ["Zarosian IV", "Museum - Zarosian IV"] },
            { name: "Praetorian staff", collections: ["Zarosian IV", "Museum - Zarosian IV", "Crafting: Inquisitor staff"] },
            { name: "Kal-i-kra chieftain crown", collections: ["Red Rum Relics III", "Museum - Bandosian III", "Hat Hoarder"] },
            { name: "Kal-i-kra mace", collections: ["Red Rum Relics III", "Museum - Bandosian III"] },
            { name: "Kal-i-kra warhorn", collections: ["Red Rum Relics III", "Museum - Bandosian III"] },
            { name: "Spear of Annihilation", collections: ["Weapon"] },
            { name: "Tsutsaroth helm", collections: ["Zamorakian IV", "Museum - Zamorakian IV", "Hat Hoarder"] },
            { name: "Tsutsaroth pauldron", collections: ["Zamorakian IV", "Museum - Zamorakian IV"] },
            { name: "Tsutsaroth urumi", collections: ["Zamorakian IV", "Museum - Zamorakian IV"] },
            { name: "Doru spear", collections: ["Saradominist IV", "Museum - Saradominist IV"] },
            { name: "Kontos lance", collections: ["Saradominist IV", "Museum - Saradominist IV"] },
            { name: "Chuluu stone", collections: ["Armadylean III", "Museum - Armadylean III", "Magic Man", "Relic: Experimental Aether Reactor"] },
            { name: "Quintessence counter", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Spherical astrolabe", collections: ["Armadylean III", "Museum - Armadylean III"] },
            { name: "Ancient globe", collections: ["Zarosian IV", "Museum - Zarosian IV"] },
            { name: "Battle plans", collections: ["Zarosian IV", "Museum - Zarosian IV"] },
            { name: "'Prima Legio' painting", collections: ["Imperial Impressionism", "Zarosian IV", "Museum - Zarosian IV"] },
            { name: "'Da Boss Man' sculpture", collections: ["Green Gobbo Goodies III", "Museum - Bandosian III", "Knowledge is Power"] },
            { name: "Horogothgar cooking pot", collections: ["Red Rum Relics III", "Green Gobbo Goodies III", "Museum - Bandosian III"] },
            { name: "Xolo shield", collections: ["Dragonkin IV", "Museum - Dragonkin IV"] },
            { name: "Xolo spear", collections: ["Dragonkin IV", "Museum - Dragonkin IV"] },
            { name: "Gold dish", collections: ["Dragonkin IV", "Museum - Dragonkin IV", "Mystery: Mysterious City"] },
            { name: "'Raksha' idol", collections: ["Dragonkin IV", "Museum - Dragonkin IV", "Mystery: Mysterious City"] }
        ];
    </script>
    
    <script type="module">
        // --- DATA STRUCTURES ---
        const materialCosts = {
            "Centurion's dress sword": { "Imperial iron": 5, "Purpleheart wood": 5 },
            "Venator dagger": { "Third Age iron": 16, "Zarosian insignia": 12 },
            "Venator light crossbow": { "Third Age iron": 12, "Zarosian insignia": 16 },
            "Centurion's seal": { "Third Age iron": 6, "Zarosian insignia": 2 },
            "Primis Elementis standard": { "Samite silk": 16, "Third Age iron": 12 },
            "Legionary gladius": { "Third Age iron": 10, "Zarosian insignia": 6, "Imperial steel": 12 },
            "Legionary square shield": { "Third Age iron": 8, "Zarosian insignia": 8, "Imperial steel": 12 },
            "Zaros effigy": { "Samite silk": 8, "White oak": 10, "Zarosian insignia": 12 },
            "Zarosian training dummy": { "Third Age iron": 16, "White oak": 14 },
            "Hookah pipe": { "Third Age iron": 10, "Goldrune": 12, "Orthenglass": 8 },
            "Opulent wine goblet": { "Third Age iron": 14, "Goldrune": 16 },
            "Crest of Dagon": { "Goldrune": 14, "Orthenglass": 18 },
            "'Disorder' painting": { "Samite silk": 6, "White oak": 6, "Vellum": 6, "Cadmium red": 14 },
            "Legatus Maximus figurine": { "Goldrune": 8, "Zarosian insignia": 14, "Ancient vis": 10 },
            "'Solem in Umbra' painting": { "Samite silk": 8, "White oak": 10, "Tyrian purple": 14 },
            "Imp mask": { "Leather scraps": 10, "Chaotic brimstone": 10, "Demonhide": 12 },
            "Lesser demon mask": { "Leather scraps": 6, "Chaotic brimstone": 8, "Demonhide": 12, "Cadmium red": 6 },
            "Greater demon mask": { "Third Age iron": 6, "Leather scraps": 6, "Chaotic brimstone": 8, "Demonhide": 12 },
            "Teleportation crystal": { "Orthenglass": 20 },
            "Order of Dis robes": { "Samite silk": 16, "Cadmium red": 10, "Eye of Dagon": 14 },
            "Ritual dagger": { "Goldrune": 16, "Hellfire metal": 24, "Ruby": 1 },
            "'Frying pan'": { "Third Age iron": 20, "White marble": 24 },
            "Hallowed lantern": { "Third Age iron": 20, "Keramos": 24, "White candle": 1 },
            "Branding iron": { "Third Age iron": 14, "Eye of Dagon": 12, "Hellfire metal": 20 },
            "Manacles": { "Third Age iron": 14, "Chaotic brimstone": 18, "Eye of Dagon": 14 },
            "Ancient timepiece": { "Goldrune": 12, "Imperial steel": 16, "Ancient vis": 18 },
            "Legatus pendant": { "Third Age iron": 16, "Goldrune": 18, "Ancient vis": 12, "Dragonstone": 1 },
            "Ceremonial unicorn ornament": { "Keramos": 26, "Cobalt blue": 20 },
            "Ceremonial unicorn saddle": { "Leather scraps": 24, "Cobalt blue": 22 },
            "Dragonkin device": { "Orthenglass": 50 },
            "Dragonkin tablet": { "Orthenglass": 50 },
            "Tetracompass (unpowered)": { "Malachite green": 30, "Cadmium red": 30, "Cobalt blue": 30, "Armadylean yellow": 30, "Tyrian purple": 30 },
            "Everlight harp": { "Everlight silvthril": 30, "White oak": 22 },
            "Everlight trumpet": { "Everlight silvthril": 28, "Goldrune": 24 },
            "Everlight violin": { "Star of Saradomin": 16, "White oak": 20, "Samite silk": 16 },
            "Folded-arm figurine (female)": { "White marble": 30, "Goldrune": 24 },
            "Folded-arm figurine (male)": { "White marble": 30, "Goldrune": 24 },
            "'Incite Fear' spell scroll": { "Vellum": 20, "Ancient vis": 18, "Blood of Orcus": 18 },
            "Pontifex signet ring": { "Third Age iron": 16, "Goldrune": 18, "Ancient vis": 22, "Dragonstone": 1 },
            "Apex cap": { "Samite silk": 28, "Leather scraps": 12, "Ancient vis": 20 },
            "Curse tablet": { "Imperial steel": 16, "Zarosian insignia": 12, "Soapstone": 20, "Blood of Orcus": 12 },
            "Funerary urn of shadow": { "Soapstone": 26, "Tyrian purple": 14, "Ancient vis": 20 },
            "Dominion discus": { "Keramos": 34, "Star of Saradomin": 28 },
            "Dominion javelin": { "Keramos": 32, "Third Age iron": 30 },
            "Dominion pelte shield": { "Star of Saradomin": 34, "Samite silk": 28 },
            "Infula robes": { "Samite silk": 26, "Leather scraps": 12, "Goldrune": 12, "Tyrian purple": 12 },
            "Funerary urn of smoke": { "Soapstone": 28, "Tyrian purple": 14, "Ancient vis": 20 },
            "Hand of the Ancients": { "Blood of Orcus": 12, "White oak": 18, "Ancient vis": 14, "Goldrune": 18 },
            "Decorative amphora": { "Tyrian purple": 16, "Ancient vis": 18, "Soapstone": 28 },
            "Funerary urn of ice": { "Soapstone": 28, "Tyrian purple": 14, "Ancient vis": 20 },
            "Loarnab rod": { "White oak": 28, "Blood of Orcus": 16, "Imperial steel": 18 },
            "Inquisitor's ceremonial armour": { "Leather scraps": 14, "Samite silk": 30, "Tyrian purple": 18 },
            "Inquisitor's ceremonial mask": { "Ancient vis": 14, "Leather scraps": 12, "Blood of Orcus": 14, "Samite silk": 22 },
            "Inquisitor's seal": { "Tyrian purple": 14, "Zarosian insignia": 20, "Ancient vis": 14, "Goldrune": 14 },
            "'The Lake of Fire' painting": { "Samite silk": 10, "White oak": 10, "Vellum": 10, "Cadmium red": 34 },
            "'Lust' metal sculpture": { "Third Age iron": 16, "Eye of Dagon": 24, "Goldrune": 24, "Ruby": 1 },
            "Gladiator helmet": { "Imperial steel": 30, "Blood of Orcus": 16, "Leather scraps": 18 },
            "Gladiator sword": { "Imperial steel": 30, "Goldrune": 18, "Zarosian insignia": 16 },
            "Funerary urn of blood": { "Soapstone": 30, "Tyrian purple": 14, "Blood of Orcus": 20 },
            "Funerary urn of miasma": { "Soapstone": 30, "Tyrian purple": 14, "Ancient vis": 20 },
            "Model chariot": { "Vellum": 12, "Imperial steel": 18, "Goldrune": 20, "Zarosian insignia": 14 },
            "'The Serpent's Fall' carving": { "Vellum": 16, "Blood of Orcus": 12, "White oak": 12, "Tyrian purple": 24 },
            "Chaos star": { "Chaotic brimstone": 28, "Hellfire metal": 36 },
            "Spiked dog collar": { "Third Age iron": 24, "Leather scraps": 24, "Chaotic brimstone": 16 },
            "Bronze Dominion medal": { "Everlight silvthril": 36, "Star of Saradomin": 26, "Bronze bar": 1 },
            "Silver Dominion medal": { "Everlight silvthril": 36, "Star of Saradomin": 26, "Silver bar": 1 },
            "Dominion torch": { "Goldrune": 12, "Orthenglass": 12, "Everlight silvthril": 20, "Star of Saradomin": 18 },
            "Ikovian gerege": { "Third Age iron": 36, "Wings of War": 30 },
            "Toy glider": { "Stormguard steel": 36, "White oak": 30 },
            "Toy war golem": { "Third Age iron": 36, "White oak": 30, "Clockwork": 1 },
            "Ceremonial dragonkin device": { "Orthenglass": 66 },
            "Decorative vase": { "White marble": 36, "Cobalt blue": 30 },
            "Kantharos cup": { "Everlight silvthril": 30, "Orthenglass": 36, "Sapphire": 1 },
            "Patera bowl": { "Keramos": 36, "Goldrune": 30, "Sapphire": 1 },
            "Castle gatestone": { "Orgone": 36, "Orthenglass": 32 },
            "Engraved ring of kinship": { "Goldrune": 28, "Dragon metal": 40 },
            "Ceremonial mace": { "Imperial steel": 20, "Third Age iron": 20, "Goldrune": 28 },
            "Pontifex Maximus figurine": { "Zarosian insignia": 24, "Ancient vis": 16, "Goldrune": 28, "Dragonstone": 1 },
            "'Consensus ad Idem' painting": { "White oak": 10, "Samite silk": 10, "Tyrian purple": 50 },
            "Wingsuit v1": { "Samite silk": 40, "Leather scraps": 20, "Stormguard steel": 9, "Armadylean yellow": 1 },
            "Avian song-egg player": { "Stormguard steel": 36, "Armadylean yellow": 32, "Diamond": 1 },
            "Keshik drum": { "Wings of War": 16, "Animal furs": 16, "White oak": 20, "Leather scraps": 16 },
            "Morin khuur": { "Armadylean yellow": 36, "White oak": 32 },
            "Ekeleshuun blinder mask": { "Vulcanised rubber": 24, "Malachite green": 20, "Vellum": 24 },
            "Narogoshuun 'Hob-da-Gob' ball": { "Vulcanised rubber": 36, "Mark of the Kyzaj": 32 },
            "Rekeshuun war tether": { "Warforged bronze": 20, "Vulcanised rubber": 22, "Leather scraps": 26 },
            "Exploratory totem": { "Dragon metal": 34, "Compass rose": 36 },
            "Excavator portal mine": { "Orgone": 36, "Orthenglass": 34 },
            "Storage totem": { "Dragon metal": 36, "Compass rose": 34 },
            "Plant seed satchel": { "Felt": 28, "Carbon black": 28, "Compass rose": 14 },
            "Snuff box": { "Soapstone": 20, "Carbon black": 30, "Felt": 20 },
            "Aviansie dreamcoat": { "Armadylean yellow": 20, "Samite silk": 30, "Animal furs": 22 },
            "Ceremonial plume": { "Armadylean yellow": 38, "Goldrune": 34, "Phoenix feather": 1 },
            "Peacocking parasol": { "Armadylean yellow": 22, "Samite silk": 30, "White oak": 20 },
            "Ogre Kyzaj axe": { "Warforged bronze": 28, "Mark of the Kyzaj": 20, "Fossilised bone": 24 },
            "Ork cleaver sword": { "Warforged bronze": 36, "Fossilised bone": 36 },
            "Larupia trophy": { "Cadmium red": 18, "Animal furs": 28, "Orthenglass": 26 },
            "Lion trophy": { "Cadmium red": 18, "Animal furs": 28, "White oak": 26 },
            "She-wolf trophy": { "Chaotic brimstone": 26, "Cadmium red": 18, "Animal furs": 28 },
            "Pontifex censer": { "Third Age iron": 20, "Ancient vis": 20, "Goldrune": 32, "Dragonstone": 1 },
            "Pontifex crozier": { "Imperial steel": 20, "Zarosian insignia": 20, "Goldrune": 32 },
            "Pontifex mitre": { "Samite silk": 32, "Ancient vis": 20, "Zarosian insignia": 20 },
            "Thorobshuun battle standard": { "Mark of the Kyzaj": 16, "Malachite green": 22, "White oak": 16, "Samite silk": 20 },
            "Yurkolgokh stink grenade": { "Yu'biusk clay": 38, "Vulcanised rubber": 36, "Weapon poison (3)": 1 },
            "Dominarian device": { "Everlight silvthril": 30, "Keramos": 22, "Third Age iron": 22, "Clockwork": 1 },
            "Fishing trident": { "Star of Saradomin": 22, "Third Age iron": 30, "Goldrune": 22 },
            "Hawkeye lens multi-vision scope": { "Stormguard steel": 40, "Orthenglass": 34 },
            "Talon-3 razor wing": { "Aetherium alloy": 40, "Wings of War": 34, "Rope": 1 },
            "'Exsanguinate' spell scroll": { "Vellum": 40, "Blood of Orcus": 36 },
            "Necromantic focus": { "Imperial steel": 20, "Blood of Orcus": 26, "Ancient vis": 30 },
            "Spent summoning charm": { "Orgone": 46, "Felt": 30 },
            "'Friendship bracelet'": { "Soapstone": 30, "Felt": 46 },
            "Homely totem": { "Soapstone": 36, "Felt": 40 },
            "High priest crozier": { "Mark of the Kyzaj": 26, "Malachite green": 24, "Goldrune": 28 },
            "High priest mitre": { "Mark of the Kyzaj": 26, "Malachite green": 24, "Samite silk": 28 },
            "High priest orb": { "Mark of the Kyzaj": 26, "Malachite green": 24, "Goldrune": 28 },
            "'Torment' metal sculpture": { "Eye of Dagon": 20, "Third Age iron": 20, "Hellfire metal": 38 },
            "'Pandemonium' tapestry": { "White oak": 12, "Samite silk": 12, "Vellum": 12, "Cadmium red": 42 },
            "Ceremonial dragonkin tablet": { "Orthenglass": 79 },
            "Pasaha": { "Felt": 40, "Goldrune": 38 },
            "Ritual bell": { "Goldrune": 40, "Compass rose": 38 },
            "Prototype gravimeter": { "Quintessence": 34, "Leather scraps": 20, "Third Age iron": 26 },
            "Songbird recorder": { "Stormguard steel": 44, "Orthenglass": 36, "Diamond": 1 },
            "Amphora": { "Everlight silvthril": 34, "Keramos": 46 },
            "Rod of Asclepius": { "White marble": 30, "Star of Saradomin": 24, "Goldrune": 26 },
            "Zarosian ewer": { "Third Age iron": 52, "Zarosian insignia": 30 },
            "Zarosian stein": { "Third Age iron": 16, "Imperial steel": 36, "Zarosian insignia": 30 },
            "Beastkeeper helm": { "Warforged bronze": 16, "Vulcanised rubber": 24, "Animal furs": 20, "Fossilised bone": 24 },
            "Idithuun horn ring": { "Yu'biusk clay": 40, "Vulcanised rubber": 44 },
            "'Nosorog!' sculpture": { "Yu'biusk clay": 30, "Malachite green": 24, "Warforged bronze": 30 },
            "Dayguard shield": { "Stormguard steel": 36, "Wings of War": 28, "White oak": 20 },
            "Stormguard gerege": { "Stormguard steel": 36, "Wings of War": 28, "Goldrune": 20 },
            "Kilaya": { "Dragon metal": 46, "Compass rose": 40 },
            "Vazara": { "Dragon metal": 30, "Compass rose": 28, "Goldrune": 28 },
            "Ourg megahitter": { "White oak": 20, "Leather scraps": 20, "Orthenglass": 26, "Malachite green": 22 },
            "Ourg tower/goblin cower shield": { "Mark of the Kyzaj": 20, "Third Age iron": 26, "Leather scraps": 22, "White oak": 20 },
            "Garagorshuun anchor": { "Warforged bronze": 32, "Mark of the Kyzaj": 26, "Third Age iron": 30 },
            "Golem heart": { "Aetherium alloy": 34, "Quintessence": 24, "Orthenglass": 16, "Soapstone": 16 },
            "Golem instruction": { "Quintessence": 46, "Vellum": 44, "Black mushroom ink": 1 },
            "Hellfire haladie": { "Hellfire metal": 44, "Third Age iron": 26, "Leather scraps": 20 },
            "Hellfire katar": { "Hellfire metal": 50, "Leather scraps": 40 },
            "Hellfire zaghnal": { "Hellfire metal": 38, "White oak": 26, "Orthenglass": 26 },
            "Death mask": { "Orgone": 56, "Soapstone": 34 },
            "Dragonkin calendar": { "Orgone": 34, "Carbon black": 28, "Compass rose": 28 },
            "Dragonkin staff": { "Orgone": 56, "Compass rose": 34 },
            "Dorgeshuun spear": { "Warforged bronze": 50, "White oak": 42 },
            "'Forged in War' sculpture": { "Warforged bronze": 50, "Yu'biusk clay": 42, "Emerald": 1 },
            "Kopis dagger": { "Everlight silvthril": 50, "Leather scraps": 42 },
            "Xiphos short sword": { "Everlight silvthril": 46, "Leather scraps": 46 },
            "'Smoke Cloud' spell scroll": { "Vellum": 40, "Ancient vis": 20, "Blood of Orcus": 32 },
            "Vigorem vial": { "Imperial steel": 54, "Ancient vis": 38, "Molten glass": 1 },
            "Dragon scalpel": { "Dragon metal": 52, "Felt": 42 },
            "Protective goggles": { "Felt": 42, "Orthenglass": 52 },
            "Dragon burner": { "Dragon metal": 52, "Orgone": 42 },
            "Orthenglass flask": { "Dragon metal": 34, "Orthenglass": 60 },
            "Blackfire lance": { "Aetherium alloy": 50, "Quintessence": 46 },
            "Nightguard shield": { "Stormguard steel": 30, "Wings of War": 36, "White oak": 30 },
            "Projection attuner": { "Goldrune": 28, "Orthenglass": 28, "Dragon metal": 40 },
            "Golden projection 'needle'": { "Goldrune": 36, "Dragon metal": 60 },
            "Huzamogaarb chaos crown": { "Warforged bronze": 44, "Third Age iron": 34, "Eye of Dagon": 20 },
            "Saragorgak star crown": { "Warforged bronze": 44, "Third Age iron": 34, "Star of Saradomin": 20 },
            "'Possession' metal sculpture": { "Eye of Dagon": 24, "Chaotic brimstone": 30, "Third Age iron": 44 },
            "Trishula": { "Hellfire metal": 48, "Eye of Dagon": 30, "Third Age iron": 20 },
            "Tsutsaroth piercing": { "Hellfire metal": 44, "Chaotic brimstone": 30, "Cadmium red": 24 },
            "'Hallowed Be the Everlight' painting": { "Cobalt blue": 52, "White oak": 16, "Samite silk": 16, "Vellum": 16 },
            "'The Lord of Light' painting": { "Cobalt blue": 52, "White oak": 16, "Samite silk": 16, "Vellum": 16 },
            "'The Pride of Padosan' painting": { "Cobalt blue": 52, "White oak": 16, "Samite silk": 16, "Vellum": 16 },
            "Meditation pipe": { "Orgone": 60, "Dragon metal": 40 },
            "Personal totem": { "Orgone": 48, "Carbon black": 26, "Compass rose": 26 },
            "Singing bowl": { "Orgone": 60, "Dragon metal": 40 },
            "Ancient magic tablet": { "Ancient vis": 40, "Blood of Orcus": 64 },
            "'Animate Dead' spell scroll": { "Vellum": 40, "Ancient vis": 24, "Blood of Orcus": 40 },
            "Portable phylactery": { "Imperial steel": 48, "Blood of Orcus": 36, "Ancient vis": 20 },
            "Comfort gatestone": { "Orthenglass": 40, "Orgone": 34, "Compass rose": 30 },
            "Halak's cube": { "Compass rose": 36, "Carbon black": 40, "Orgone": 28 },
            "Lingam stone": { "Orgone": 44, "Carbon black": 30, "Compass rose": 32 },
            "Master control": { "Orgone": 30, "Carbon black": 32, "Compass rose": 44 },
            "'The Enlightened Soul' scroll": { "Star of Saradomin": 50, "Vellum": 60 },
            "'The Eudoxian Elements' tablet": { "White marble": 60, "Goldrune": 50 },
            "Drogokishuun hook sword": { "Warforged bronze": 44, "Malachite green": 36, "Fossilised bone": 32 },
            "Hobgoblin mansticker": { "Warforged bronze": 66, "Fossilised bone": 46 },
            "Chaos Elemental trophy": { "Chaotic brimstone": 52, "White oak": 30, "Hellfire metal": 30 },
            "Virius trophy": { "Demonhide": 44, "White oak": 34, "Orthenglass": 34 },
            "Flat cap": { "Armadylean yellow": 60, "Samite silk": 54 },
            "Night owl flight goggles": { "Armadylean yellow": 44, "Leather scraps": 40, "Orthenglass": 30 },
            "Prototype godbow": { "Aetherium alloy": 50, "Quintessence": 34, "Wings of War": 34 },
            "Prototype godstaff": { "Aetherium alloy": 50, "Quintessence": 34, "Wings of War": 34 },
            "Prototype godsword": { "Aetherium alloy": 50, "Wings of War": 34, "Goldrune": 34 },
            "Xolo hard hat": { "Goldrune": 54, "Dragon metal": 66 },
            "Xolo pickaxe": { "Goldrune": 36, "Dragon metal": 50, "Orgone": 34 },
            "Portable portal generator": { "Dragon metal": 50, "Orthenglass": 36, "Goldrune": 34 },
            "Warped trinket": { "Dragon metal": 30, "Orthenglass": 30, "Soapstone": 30, "Goldrune": 30 },
            "Praetorian hood": { "Ancient vis": 36, "Samite silk": 48, "Zarosian insignia": 40, "Death rune": 30 },
            "Praetorian robes": { "Ancient vis": 30, "Samite silk": 54, "Zarosian insignia": 40, "Death rune": 50 },
            "Praetorian staff": { "Imperial steel": 36, "Ancient vis": 58, "Zarosian insignia": 30, "Death rune": 100 },
            "Kal-i-kra chieftain crown": { "Yu'biusk clay": 66, "Animal furs": 60, "Fossilised bone": 40 },
            "Kal-i-kra mace": { "Vulcanised rubber": 42, "Third Age iron": 44, "Fossilised bone": 40 },
            "Kal-i-kra warhorn": { "Vulcanised rubber": 44, "Fossilised bone": 42, "Animal furs": 40 },
            "Spear of Annihilation": { "Vulcanised rubber": 500, "Malachite green": 500, "Goldrune": 500 },
            "Tsutsaroth helm": { "Hellfire metal": 50, "Eye of Dagon": 40, "Goldrune": 40 },
            "Tsutsaroth pauldron": { "Hellfire metal": 40, "Goldrune": 50, "Eye of Dagon": 40 },
            "Tsutsaroth urumi": { "Hellfire metal": 50, "Eye of Dagon": 40, "Third Age iron": 40 },
            "Doru spear": { "Everlight silvthril": 70, "White oak": 62 },
            "Kontos lance": { "Everlight silvthril": 70, "Samite silk": 62 },
            "Chuluu stone": { "Aetherium alloy": 40, "Quintessence": 30, "Soapstone": 40, "Goldrune": 24 },
            "Quintessence counter": { "Quintessence": 54, "Stormguard steel": 40, "White oak": 40 },
            "Spherical astrolabe": { "Aetherium alloy": 46, "Armadylean yellow": 40, "Orthenglass": 48 },
            "Ancient globe": { "White oak": 20, "Tyrian purple": 54, "Ancient vis": 60 },
            "Battle plans": { "Vellum": 40, "Tyrian purple": 60, "Ancient vis": 34 },
            "'Prima Legio' painting": { "White oak": 20, "Samite silk": 20, "Tyrian purple": 74, "Zarosian insignia": 20 },
            "'Da Boss Man' sculpture": { "Yu'biusk clay": 50, "Malachite green": 44, "Soapstone": 44 },
            "Horogothgar cooking pot": { "Yu'biusk clay": 60, "Malachite green": 38, "Soapstone": 40 },
            "Xolo shield": { "Goldrune": 52, "Orgone": 44, "Felt": 42 },
            "Xolo spear": { "Dragon metal": 74, "Orgone": 64 },
            "Gold dish": { "Goldrune": 86, "Dragon metal": 54 },
            "'Raksha' idol": { "Orgone": 56, "Dragon metal": 44, "Goldrune": 40 },
        };
        const materialFactions = {
            'Imperial iron': 'Zarosian', 'Purpleheart wood': 'Zarosian', 'Third Age iron': 'Agnostic', 
            'Zarosian insignia': 'Zarosian', 'Samite silk': 'Agnostic', 'Imperial steel': 'Zarosian', 
            'White oak': 'Agnostic', 'Goldrune': 'Agnostic', 'Orthenglass': 'Agnostic', 'Vellum': 'Agnostic', 
            'Cadmium red': 'Zamorakian', 'Ancient vis': 'Zarosian', 'Tyrian purple': 'Zarosian', 
            'Leather scraps': 'Agnostic', 'Chaotic brimstone': 'Zamorakian', 'Demonhide': 'Zamorakian', 
            'Eye of Dagon': 'Zamorakian', 'Hellfire metal': 'Zamorakian', 'Keramos': 'Saradominist', 
            'White marble': 'Saradominist', 'Cobalt blue': 'Saradominist', 'Everlight silvthril': 'Saradominist', 
            'Star of Saradomin': 'Saradominist', 'Blood of Orcus': 'Zarosian', 'Soapstone': 'Agnostic', 
            'Stormguard steel': 'Armadylean', 'Wings of War': 'Armadylean', 'Dragon metal': 'Dragonkin', 
            'Orgone': 'Dragonkin', 'Animal furs': 'Agnostic', 'Armadylean yellow': 'Armadylean', 
            'Malachite green': 'Bandosian', 'Mark of the Kyzaj': 'Bandosian', 'Vulcanised rubber': 'Bandosian', 
            'Warforged bronze': 'Bandosian', 'Compass rose': 'Dragonkin', 'Carbon black': 'Dragonkin', 
            'Felt': 'Dragonkin', 'Fossilised bone': 'Agnostic', 'Yu\'biusk clay': 'Bandosian', 
            'Aetherium alloy': 'Armadylean', 'Quintessence': 'Armadylean',
            // Corrected and updated Misc category
            'Ruby': 'Misc', 'White candle': 'Misc', 'Dragonstone': 'Misc', 'Bronze bar': 'Misc', 'Silver bar': 'Misc',
            'Clockwork': 'Misc', 'Sapphire': 'Misc', 'Diamond': 'Misc', 'Phoenix feather': 'Misc', 'Weapon poison (3)': 'Misc',
            'Rope': 'Misc', 'Black mushroom ink': 'Misc', 'Emerald': 'Misc', 'Molten glass': 'Misc', 'Death rune': 'Misc'
        };

        
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc, getDoc, setDoc, writeBatch, getDocs, query, updateDoc, deleteField } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        
        // --- PASTE YOUR FIREBASE CONFIGURATION HERE ---
        const firebaseConfig = {
            apiKey: "AIzaSyB7XlmkRWHkTIwTQQYzhtLDp0NBy_rTeKE",
            authDomain: "tci-gim-artefact-requesting.firebaseapp.com",
            projectId: "tci-gim-artefact-requesting",
            storageBucket: "tci-gim-artefact-requesting.appspot.com",
            messagingSenderId: "1004367201833",
            appId: "1:1004367201833:web:39bb7f3762443da04c7e38"
        };
        // --- END OF FIREBASE CONFIGURATION ---

        // --- GLOBAL VARIABLES ---
        const players = ['Reebs', 'Jahar', 'Maelstrom', 'Thomas'];
        let artefacts = []; // This will be populated from Firebase
        let activePlayer = null; // The currently selected player for editing
        let unsubscribe = null; // To store the real-time listener

        // --- INITIALIZATION ---
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const artefactsCollection = collection(db, "artefacts");

        document.addEventListener('DOMContentLoaded', () => {
            renderPlayerControls();
            setupRealtimeListener();

            document.getElementById('collection-filter').addEventListener('change', applyFilters);
            document.getElementById('artefact-search').addEventListener('input', applyFilters);
            document.getElementById('sync-button').addEventListener('click', syncDatabaseWithMasterList);
        });

        // --- DATABASE SYNC LOGIC ---
        async function syncDatabaseWithMasterList() {
            const syncButton = document.getElementById('sync-button');
            const syncStatus = document.getElementById('sync-status');

            syncButton.disabled = true;
            syncButton.textContent = 'Syncing...';
            syncStatus.textContent = 'Fetching current data from database...';

            try {
                // 1. Get the master list from the HTML. Add a sortOrder property.
                const localMasterList = masterArtefactList.map((artefact, index) => ({
                    ...artefact,
                    sortOrder: index
                }));
                const localMasterMap = new Map(localMasterList.map(a => [a.name, a]));

                // 2. Get all existing documents from Firestore.
                const querySnapshot = await getDocs(query(artefactsCollection));
                const dbArtefacts = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                const dbArtefactsMap = new Map(dbArtefacts.map(a => [a.name, a]));

                syncStatus.textContent = 'Comparing lists and preparing updates...';

                const batch = writeBatch(db);
                let added = 0, updated = 0, removed = 0;

                // 3. Iterate through the local master list to find items to add or update.
                for (const [name, localArtefact] of localMasterMap.entries()) {
                    const dbArtefact = dbArtefactsMap.get(name);
                    if (dbArtefact) {
                        // Artefact exists in DB. Check if an update is needed.
                        if (dbArtefact.sortOrder !== localArtefact.sortOrder || JSON.stringify(dbArtefact.collections) !== JSON.stringify(localArtefact.collections)) {
                            const docRef = doc(db, "artefacts", dbArtefact.id);
                            batch.update(docRef, {
                                collections: localArtefact.collections,
                                sortOrder: localArtefact.sortOrder
                            });
                            updated++;
                        }
                    } else {
                        // Artefact does not exist in DB. Add it.
                        const newDocRef = doc(artefactsCollection);
                        batch.set(newDocRef, { ...localArtefact, requestedBy: {} });
                        added++;
                    }
                }

                // 4. Iterate through the database list to find items to delete.
                for (const [name, dbArtefact] of dbArtefactsMap.entries()) {
                    if (!localMasterMap.has(name)) {
                        // Artefact in DB is not in the local master list. Delete it.
                        const docRef = doc(db, "artefacts", dbArtefact.id);
                        batch.delete(docRef);
                        removed++;
                    }
                }

                // 5. Commit the batch write.
                if (added > 0 || updated > 0 || removed > 0) {
                    syncStatus.textContent = `Applying changes: ${added} added, ${updated} updated, ${removed} removed.`;
                    await batch.commit();
                    syncStatus.textContent = `Sync complete! ${added} added, ${updated} updated, ${removed} removed.`;
                } else {
                    syncStatus.textContent = 'Database is already up to date. No changes needed.';
                }

            } catch (error) {
                console.error("Error syncing database:", error);
                syncStatus.textContent = 'An error occurred during sync. Check the console.';
                syncStatus.classList.add('text-red-500');
            } finally {
                setTimeout(() => {
                    syncStatus.textContent = '';
                    syncStatus.classList.remove('text-red-500');
                    syncButton.disabled = false;
                    syncButton.textContent = 'Sync Master List';
                }, 5000);
            }
        }


        // --- FIREBASE REAL-TIME LISTENER ---
        function setupRealtimeListener() {
            if (unsubscribe) unsubscribe();

            unsubscribe = onSnapshot(artefactsCollection, (snapshot) => {
                if (snapshot.empty) {
                     document.getElementById('artefact-table-body').innerHTML = `<tr><td colspan="5" class="text-center py-4">Database is empty. Please use the "Sync Master List" button to populate it.</td></tr>`;
                     return;
                }
                artefacts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                artefacts.sort((a, b) => a.sortOrder - b.sortOrder);
                
                populateFilters();
                applyFilters();
                // Call material calculators whenever the data changes
                calculateAndRenderTotalMaterials();
                calculateAndRenderPerPersonMaterials();
            }, (error) => {
                console.error("Error listening to artefact collection:", error);
                document.getElementById('artefact-table-body').innerHTML = `<tr><td colspan="5" class="text-center py-4 text-red-500">Error connecting to the database. Please check the console and your Firebase setup.</td></tr>`;
            });
        }

        // --- PLAYER CONTROLS & REQUEST LOGIC ---
        function renderPlayerControls() {
            const container = document.getElementById('player-controls');
            container.innerHTML = '';
            players.forEach(player => {
                const playerButton = document.createElement('button');
                playerButton.className = 'p-2 rounded-lg border-2 border-amber-300 shadow-sm hover:bg-amber-200 transition';
                playerButton.textContent = player;
                
                playerButton.onclick = () => {
                    activePlayer = (activePlayer === player) ? null : player;
                    renderPlayerControls();
                    applyFilters();
                };

                if (player === activePlayer) {
                    playerButton.classList.add('bg-amber-300', 'border-amber-500', 'font-bold');
                    playerButton.classList.remove('border-amber-300');
                }

                container.appendChild(playerButton);
            });
        }

        async function updateRequest(artefactId, change) {
            if (!activePlayer) {
                const prompt = document.getElementById('request-prompt');
                prompt.textContent = 'Please select your name above before making a request!';
                prompt.classList.add('text-red-500', 'font-bold');
                setTimeout(() => {
                    prompt.textContent = 'Click your name below to start adding or removing requests in the table.';
                    prompt.classList.remove('text-red-500', 'font-bold');
                }, 2500);
                return;
            }

            const artefactRef = doc(db, "artefacts", artefactId);
            
            try {
                const docSnap = await getDoc(artefactRef);
                if (docSnap.exists()) {
                    const artefact = docSnap.data();
                    const currentRequests = artefact.requestedBy || {};
                    const currentCount = currentRequests[activePlayer] || 0;
                    const newCount = Math.max(0, currentCount + change);
                    const fieldPath = `requestedBy.${activePlayer}`;
                    if (newCount > 0) {
                        await updateDoc(artefactRef, { [fieldPath]: newCount });
                    } else {
                        await updateDoc(artefactRef, { [fieldPath]: deleteField() });
                    }
                }
            } catch (error) {
                console.error("Error updating request:", error);
            }
        }

        // --- FILTERING AND RENDERING ---
        function populateFilters() {
            const collectionFilter = document.getElementById('collection-filter');
            const currentVal = collectionFilter.value;
            collectionFilter.innerHTML = '<option value="all">All Collections</option>';
            const collections = [...new Set(artefacts.flatMap(a => a.collections))].sort();
            collections.forEach(collection => {
                const option = document.createElement('option');
                option.value = collection;
                option.textContent = collection;
                collectionFilter.appendChild(option);
            });
            collectionFilter.value = currentVal;
        }

        function applyFilters() {
            const collection = document.getElementById('collection-filter').value;
            const searchTerm = document.getElementById('artefact-search').value.toLowerCase();

            let filteredArtefacts = artefacts.filter(artefact => {
                const inCollection = collection === 'all' || artefact.collections.includes(collection);
                const matchesName = artefact.name.toLowerCase().includes(searchTerm);
                const matchesCollection = artefact.collections.some(c => c.toLowerCase().includes(searchTerm));
                const matchesSearch = matchesName || matchesCollection;
                return inCollection && matchesSearch;
            });
            renderTable(filteredArtefacts);
        }

        function renderTable(data) {
            const tableBody = document.getElementById('artefact-table-body');
            tableBody.innerHTML = '';
            if (data.length === 0 && artefacts.length > 0) {
                tableBody.innerHTML = `<tr><td colspan="5" class="text-center py-4">No artefacts found matching your criteria.</td></tr>`;
                return;
            }
            data.forEach(artefact => {
                const row = tableBody.insertRow();
                row.className = 'bg-white border-b hover:bg-amber-100';
                row.insertCell().textContent = artefact.name;
                row.cells[0].className = 'px-6 py-4 font-medium text-gray-900 whitespace-nowrap';
                row.insertCell().textContent = artefact.collections.join(', ');
                row.cells[1].className = 'px-6 py-4';
                const totalRequests = artefact.requestedBy ? Object.values(artefact.requestedBy).reduce((s, c) => s + c, 0) : 0;
                row.insertCell().textContent = totalRequests;
                row.cells[2].className = 'px-6 py-4 font-bold text-center';
                const requestersString = artefact.requestedBy ? Object.entries(artefact.requestedBy).map(([n, c]) => `${n} (x${c})`).sort().join(', ') : 'None';
                row.insertCell().textContent = requestersString;
                row.cells[3].className = 'px-6 py-4';
                const cellControls = row.insertCell();
                cellControls.className = 'px-6 py-4';
                const controlDiv = document.createElement('div');
                controlDiv.className = 'flex items-center justify-center gap-2';
                const minusButton = document.createElement('button');
                minusButton.className = 'px-2 py-0.5 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400';
                minusButton.textContent = '-';
                minusButton.disabled = !activePlayer;
                minusButton.onclick = () => updateRequest(artefact.id, -1);
                const countSpan = document.createElement('span');
                countSpan.className = 'font-bold w-6 text-center';
                countSpan.textContent = (activePlayer && artefact.requestedBy && artefact.requestedBy[activePlayer]) ? artefact.requestedBy[activePlayer] : '0';
                const plusButton = document.createElement('button');
                plusButton.className = 'px-2 py-0.5 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400';
                plusButton.textContent = '+';
                plusButton.disabled = !activePlayer;
                plusButton.onclick = () => updateRequest(artefact.id, 1);
                controlDiv.appendChild(minusButton);
                controlDiv.appendChild(countSpan);
                controlDiv.appendChild(plusButton);
                cellControls.appendChild(controlDiv);
            });
        }
        
        // --- MATERIAL CALCULATION ---
        function calculateAndRenderTotalMaterials() {
            const totalMaterials = {};
            artefacts.forEach(artefact => {
                const requests = artefact.requestedBy;
                if (!requests) return;
                const totalCount = Object.values(requests).reduce((sum, count) => sum + count, 0);
                if (totalCount === 0) return;
                const materials = materialCosts[artefact.name];
                if (materials) {
                    for (const material in materials) {
                        totalMaterials[material] = (totalMaterials[material] || 0) + (materials[material] * totalCount);
                    }
                }
            });

            const container = document.getElementById('material-list');
            container.innerHTML = ''; 

            if (Object.keys(totalMaterials).length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500">Request an artefact to see the required materials here.</p>';
                return;
            }

            const materialsByFaction = {};
            for (const material in totalMaterials) {
                const faction = materialFactions[material] || 'Misc';
                if (!materialsByFaction[faction]) materialsByFaction[faction] = [];
                materialsByFaction[faction].push({ name: material, count: totalMaterials[material] });
            }

            const sortedFactions = Object.keys(materialsByFaction).sort((a, b) => {
                if (a === 'Misc') return 1;
                if (b === 'Misc') return -1;
                return a.localeCompare(b);
            });

            sortedFactions.forEach(faction => {
                const factionHeader = document.createElement('h3');
                factionHeader.className = 'text-lg font-semibold text-amber-800 mt-4 mb-2 border-b border-amber-200 pb-1';
                factionHeader.textContent = faction;
                container.appendChild(factionHeader);

                const factionGrid = document.createElement('div');
                factionGrid.className = 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4';
                
                materialsByFaction[faction].sort((a, b) => a.name.localeCompare(b.name)).forEach(mat => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'bg-amber-50 p-3 rounded-lg text-center shadow-sm';
                    itemDiv.innerHTML = `
                        <p class="font-bold text-amber-900 text-lg">${mat.count}</p>
                        <p class="text-sm text-amber-700">${mat.name}</p>
                    `;
                    factionGrid.appendChild(itemDiv);
                });
                container.appendChild(factionGrid);
            });
        }

        function calculateAndRenderPerPersonMaterials() {
            const container = document.getElementById('per-person-material-list');
            container.innerHTML = '';
            let hasAnyRequests = false;

            players.forEach(player => {
                const playerMaterials = {};
                artefacts.forEach(artefact => {
                    const count = artefact.requestedBy ? (artefact.requestedBy[player] || 0) : 0;
                    if (count > 0) {
                        hasAnyRequests = true;
                        const materials = materialCosts[artefact.name];
                        if (materials) {
                            for (const material in materials) {
                                playerMaterials[material] = (playerMaterials[material] || 0) + (materials[material] * count);
                            }
                        }
                    }
                });

                if (Object.keys(playerMaterials).length > 0) {
                    const materialsByFaction = {};
                    for (const material in playerMaterials) {
                        const faction = materialFactions[material] || 'Misc';
                        if (!materialsByFaction[faction]) materialsByFaction[faction] = [];
                        materialsByFaction[faction].push({ name: material, count: playerMaterials[material] });
                    }

                    const playerCard = document.createElement('div');
                    playerCard.className = 'bg-amber-50 p-4 rounded-lg shadow-md';
                    let cardHtml = `<h3 class="text-xl font-bold text-amber-900 mb-3 text-center border-b-2 border-amber-200 pb-2">${player}</h3>`;
                    
                    const sortedFactions = Object.keys(materialsByFaction).sort((a, b) => {
                        if (a === 'Misc') return 1;
                        if (b === 'Misc') return -1;
                        return a.localeCompare(b);
                    });

                    sortedFactions.forEach(faction => {
                        cardHtml += `<h4 class="text-md font-semibold text-amber-800 mt-3 mb-1">${faction}</h4><ul class="list-disc list-inside text-sm text-gray-700">`;
                        materialsByFaction[faction].sort((a,b) => a.name.localeCompare(b.name)).forEach(mat => {
                           cardHtml += `<li><strong>${mat.count}</strong> ${mat.name}</li>`;
                        });
                        cardHtml += `</ul>`;
                    });
                    playerCard.innerHTML = cardHtml;
                    container.appendChild(playerCard);
                }
            });

            if (!hasAnyRequests) {
                container.innerHTML = '<p class="col-span-full text-center text-gray-500">No requests have been made by anyone yet.</p>';
            }
        }
    </script>
</body>
</html>
